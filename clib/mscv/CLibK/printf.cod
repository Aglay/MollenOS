; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	C:\Users\Phail\Documents\GitHub\MollenOS\clib\src\stdio\printf.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRT
INCLUDELIB OLDNAMES

PUBLIC	_printf
EXTRN	_streamout:PROC
; Function compile flags: /Ogtp
; File c:\users\phail\documents\github\mollenos\clib\src\stdio\printf.c
;	COMDAT _printf
_TEXT	SEGMENT
_format$ = 8						; size = 4
_printf	PROC						; COMDAT

; 58   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 59   : 	//Decl
; 60   : 	va_list args;
; 61   : 	int result = 0;
; 62   : 
; 63   : 	//Sanity
; 64   : 	if (format == NULL)

  00003	8b 45 08	 mov	 eax, DWORD PTR _format$[ebp]
  00006	85 c0		 test	 eax, eax
  00008	75 05		 jne	 SHORT $LN1@printf

; 65   : 		return -1;

  0000a	83 c8 ff	 or	 eax, -1

; 70   : 	va_end(args);
; 71   : 
; 72   : 	return result;
; 73   : }

  0000d	5d		 pop	 ebp
  0000e	c3		 ret	 0
$LN1@printf:

; 66   : 
; 67   : 	//Use sprintf for this
; 68   : 	va_start(args, format);
; 69   : 	result = streamout(NULL, 0x20000, format, args);

  0000f	8d 4d 0c	 lea	 ecx, DWORD PTR _format$[ebp+4]
  00012	51		 push	 ecx
  00013	50		 push	 eax
  00014	68 00 00 02 00	 push	 131072			; 00020000H
  00019	6a 00		 push	 0
  0001b	e8 00 00 00 00	 call	 _streamout
  00020	83 c4 10	 add	 esp, 16			; 00000010H

; 70   : 	va_end(args);
; 71   : 
; 72   : 	return result;
; 73   : }

  00023	5d		 pop	 ebp
  00024	c3		 ret	 0
_printf	ENDP
_TEXT	ENDS
END
