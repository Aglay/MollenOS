; Listing generated by Microsoft (R) Optimizing Compiler Version 18.00.40629.0 

	TITLE	C:\Users\Philip\Documents\GitHub\MollenOS\clib\src\math\frexp.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRT
INCLUDELIB OLDNAMES

CONST	SEGMENT
_two54	DQ	04350000000000000r		; 1.80144e+016
CONST	ENDS
PUBLIC	_frexp
PUBLIC	__real@4350000000000000
EXTRN	__fltused:DWORD
;	COMDAT __real@4350000000000000
CONST	SEGMENT
__real@4350000000000000 DQ 04350000000000000r	; 1.80144e+016
CONST	ENDS
; Function compile flags: /Ogtp
; File c:\users\philip\documents\github\mollenos\clib\src\math\frexp.c
;	COMDAT _frexp
_TEXT	SEGMENT
_sh_u$1 = 8						; size = 8
_gh_u$2 = 8						; size = 8
_ew_u$3 = 8						; size = 8
_x$ = 8							; size = 8
_eptr$ = 16						; size = 4
_frexp	PROC						; COMDAT

; 30   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 31   : 	int32_t hx, ix, lx;
; 32   : 	EXTRACT_WORDS(hx, lx, x);

  00003	dd 45 08	 fld	 QWORD PTR _x$[ebp]
  00006	dd 55 08	 fst	 QWORD PTR _ew_u$3[ebp]
  00009	8b 55 0c	 mov	 edx, DWORD PTR _ew_u$3[ebp+4]

; 33   : 	ix = 0x7fffffff & hx;

  0000c	8b ca		 mov	 ecx, edx
  0000e	56		 push	 esi

; 34   : 	*eptr = 0;

  0000f	8b 75 10	 mov	 esi, DWORD PTR _eptr$[ebp]
  00012	81 e1 ff ff ff
	7f		 and	 ecx, 2147483647		; 7fffffffH
  00018	c7 06 00 00 00
	00		 mov	 DWORD PTR [esi], 0

; 35   : 	if (ix >= 0x7ff00000 || ((ix | lx) == 0)) return x;	/* 0,inf,nan */

  0001e	81 f9 00 00 f0
	7f		 cmp	 ecx, 2146435072		; 7ff00000H
  00024	7d 49		 jge	 SHORT $LN13@frexp
  00026	8b c1		 mov	 eax, ecx
  00028	0b 45 08	 or	 eax, DWORD PTR _ew_u$3[ebp]
  0002b	74 42		 je	 SHORT $LN13@frexp

; 36   : 	if (ix<0x00100000) {		/* subnormal */

  0002d	81 f9 00 00 10
	00		 cmp	 ecx, 1048576		; 00100000H
  00033	7d 1a		 jge	 SHORT $LN7@frexp

; 37   : 		x *= two54;

  00035	dc 0d 00 00 00
	00		 fmul	 QWORD PTR __real@4350000000000000

; 38   : 		GET_HIGH_WORD(hx, x);
; 39   : 		ix = hx & 0x7fffffff;
; 40   : 		*eptr = -54;

  0003b	c7 06 ca ff ff
	ff		 mov	 DWORD PTR [esi], -54	; ffffffcaH
  00041	dd 55 08	 fst	 QWORD PTR _gh_u$2[ebp]
  00044	8b 55 0c	 mov	 edx, DWORD PTR _gh_u$2[ebp+4]
  00047	8b ca		 mov	 ecx, edx
  00049	81 e1 ff ff ff
	7f		 and	 ecx, 2147483647		; 7fffffffH
$LN7@frexp:

; 41   : 	}
; 42   : 	*eptr += (ix >> 20) - 1022;

  0004f	c1 f9 14	 sar	 ecx, 20			; 00000014H

; 43   : 	hx = (hx & 0x800fffff) | 0x3fe00000;

  00052	81 e2 ff ff ef
	bf		 and	 edx, -1074790401	; bfefffffH
  00058	81 e9 fe 03 00
	00		 sub	 ecx, 1022		; 000003feH
  0005e	01 0e		 add	 DWORD PTR [esi], ecx
  00060	81 ca 00 00 e0
	3f		 or	 edx, 1071644672		; 3fe00000H

; 44   : 	SET_HIGH_WORD(x, hx);

  00066	dd 5d 08	 fstp	 QWORD PTR _sh_u$1[ebp]
  00069	89 55 0c	 mov	 DWORD PTR _sh_u$1[ebp+4], edx

; 45   : 	return x;

  0006c	dd 45 08	 fld	 QWORD PTR _sh_u$1[ebp]
$LN13@frexp:
  0006f	5e		 pop	 esi

; 46   : }

  00070	5d		 pop	 ebp
  00071	c3		 ret	 0
_frexp	ENDP
_TEXT	ENDS
END
