; Listing generated by Microsoft (R) Optimizing Compiler Version 18.00.31101.0 

	TITLE	C:\Users\Philip\Documents\GitHub\MollenOS\clib\src\string\strrchr.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRT
INCLUDELIB OLDNAMES

PUBLIC	_strrchr
EXTRN	_strchr:PROC
; Function compile flags: /Ogtp
; File c:\users\philip\documents\github\mollenos\clib\src\string\strrchr.c
;	COMDAT _strrchr
_TEXT	SEGMENT
_s$ = 8							; size = 4
_i$ = 12						; size = 4
_strrchr PROC						; COMDAT

; 40   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi

; 41   : 	const char *last = NULL;
; 42   : 
; 43   : 	if (i)

  00004	8b 75 0c	 mov	 esi, DWORD PTR _i$[ebp]
  00007	85 f6		 test	 esi, esi
  00009	74 31		 je	 SHORT $LN4@strrchr

; 44   : 	{
; 45   : 		while ((s=strchr(s, i)))

  0000b	56		 push	 esi
  0000c	ff 75 08	 push	 DWORD PTR _s$[ebp]
  0000f	e8 00 00 00 00	 call	 _strchr
  00014	83 c4 08	 add	 esp, 8
  00017	85 c0		 test	 eax, eax
  00019	74 1c		 je	 SHORT $LN11@strrchr
  0001b	57		 push	 edi
  0001c	8d 64 24 00	 npad	 4
$LL3@strrchr:

; 46   : 		{
; 47   : 			last = s;

  00020	8b f8		 mov	 edi, eax

; 48   : 			s++;

  00022	40		 inc	 eax
  00023	56		 push	 esi
  00024	50		 push	 eax
  00025	e8 00 00 00 00	 call	 _strchr
  0002a	83 c4 08	 add	 esp, 8
  0002d	85 c0		 test	 eax, eax
  0002f	75 ef		 jne	 SHORT $LL3@strrchr

; 54   : 	}
; 55   : 		  
; 56   : 	return (char *) last;

  00031	8b c7		 mov	 eax, edi
  00033	5f		 pop	 edi
  00034	5e		 pop	 esi

; 57   : }

  00035	5d		 pop	 ebp
  00036	c3		 ret	 0
$LN11@strrchr:

; 54   : 	}
; 55   : 		  
; 56   : 	return (char *) last;

  00037	33 c0		 xor	 eax, eax
  00039	5e		 pop	 esi

; 57   : }

  0003a	5d		 pop	 ebp
  0003b	c3		 ret	 0
$LN4@strrchr:
  0003c	5e		 pop	 esi

; 49   : 		}
; 50   : 	}
; 51   : 	else
; 52   : 	{
; 53   : 		last = strchr(s, i);

  0003d	c7 45 0c 00 00
	00 00		 mov	 DWORD PTR _i$[ebp], 0

; 57   : }

  00044	5d		 pop	 ebp

; 49   : 		}
; 50   : 	}
; 51   : 	else
; 52   : 	{
; 53   : 		last = strchr(s, i);

  00045	e9 00 00 00 00	 jmp	 _strchr
_strrchr ENDP
_TEXT	ENDS
END
