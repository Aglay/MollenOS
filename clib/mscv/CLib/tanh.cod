; Listing generated by Microsoft (R) Optimizing Compiler Version 18.00.40629.0 

	TITLE	C:\Users\Philip\Documents\GitHub\MollenOS\clib\src\math\tanh.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRT
INCLUDELIB OLDNAMES

PUBLIC	_tanh
PUBLIC	__real@3ff0000000000000
PUBLIC	__real@4049000000000000
PUBLIC	__real@bff0000000000000
PUBLIC	__real@c049000000000000
EXTRN	__CIexp:PROC
EXTRN	__fltused:DWORD
;	COMDAT __real@c049000000000000
CONST	SEGMENT
__real@c049000000000000 DQ 0c049000000000000r	; -50
CONST	ENDS
;	COMDAT __real@bff0000000000000
CONST	SEGMENT
__real@bff0000000000000 DQ 0bff0000000000000r	; -1
CONST	ENDS
;	COMDAT __real@4049000000000000
CONST	SEGMENT
__real@4049000000000000 DQ 04049000000000000r	; 50
CONST	ENDS
;	COMDAT __real@3ff0000000000000
CONST	SEGMENT
__real@3ff0000000000000 DQ 03ff0000000000000r	; 1
CONST	ENDS
; Function compile flags: /Ogtp
; File c:\users\philip\documents\github\mollenos\clib\src\math\tanh.c
;	COMDAT _tanh
_TEXT	SEGMENT
_x$ = 8							; size = 8
_tanh	PROC						; COMDAT

; 13   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 14   : 	if (x > 50)

  00003	dd 05 00 00 00
	00		 fld	 QWORD PTR __real@4049000000000000
  00009	dd 45 08	 fld	 QWORD PTR _x$[ebp]
  0000c	d8 d1		 fcom	 ST(1)
  0000e	df e0		 fnstsw	 ax
  00010	dd d9		 fstp	 ST(1)
  00012	f6 c4 41	 test	 ah, 65			; 00000041H
  00015	75 06		 jne	 SHORT $LN4@tanh
  00017	dd d8		 fstp	 ST(0)

; 15   : 		return 1;

  00019	d9 e8		 fld1

; 23   : 	}
; 24   : }

  0001b	5d		 pop	 ebp
  0001c	c3		 ret	 0
$LN4@tanh:

; 16   : 	else if (x < -50)

  0001d	dd 05 00 00 00
	00		 fld	 QWORD PTR __real@c049000000000000
  00023	d8 d9		 fcomp	 ST(1)
  00025	df e0		 fnstsw	 ax
  00027	f6 c4 41	 test	 ah, 65			; 00000041H
  0002a	75 0a		 jne	 SHORT $LN2@tanh
  0002c	dd d8		 fstp	 ST(0)

; 17   : 		return -1;

  0002e	dd 05 00 00 00
	00		 fld	 QWORD PTR __real@bff0000000000000

; 23   : 	}
; 24   : }

  00034	5d		 pop	 ebp
  00035	c3		 ret	 0
$LN2@tanh:

; 18   : 	else
; 19   : 	{
; 20   : 		const double ebig = exp(x);

  00036	e8 00 00 00 00	 call	 __CIexp

; 21   : 		const double esmall = 1.0/ebig;

  0003b	d9 e8		 fld1
  0003d	d8 f1		 fdiv	 ST(0), ST(1)

; 22   : 		return (ebig - esmall) / (ebig + esmall);

  0003f	d9 c1		 fld	 ST(1)
  00041	d8 e1		 fsub	 ST(0), ST(1)
  00043	d9 c9		 fxch	 ST(1)
  00045	de c2		 faddp	 ST(2), ST(0)
  00047	de f1		 fdivrp	 ST(1), ST(0)

; 23   : 	}
; 24   : }

  00049	5d		 pop	 ebp
  0004a	c3		 ret	 0
_tanh	ENDP
_TEXT	ENDS
END
