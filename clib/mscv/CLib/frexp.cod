; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	C:\Users\Phail\Documents\GitHub\MollenOS\clib\src\math\frexp.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRT
INCLUDELIB OLDNAMES

PUBLIC	_frexp
EXTRN	__fltused:DWORD
; Function compile flags: /Ogtp
; File c:\users\phail\documents\github\mollenos\clib\src\math\frexp.c
;	COMDAT _frexp
_TEXT	SEGMENT
___x$ = 8						; size = 8
_exptr$ = 16						; size = 4
_frexp	PROC						; COMDAT

; 10   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 11   : 	union
; 12   : 	{
; 13   : 		double*		__x;
; 14   : 		double_s*	x;
; 15   : 	} x;
; 16   : 
; 17   : 	x.__x = &__x;
; 18   : 
; 19   : 	if(exptr != NULL)

  00003	8b 4d 10	 mov	 ecx, DWORD PTR _exptr$[ebp]
  00006	8b 45 0c	 mov	 eax, DWORD PTR ___x$[ebp+4]
  00009	85 c9		 test	 ecx, ecx
  0000b	74 13		 je	 SHORT $LN1@frexp

; 20   : 		*exptr = x.x->exponent - 0x3FE;

  0000d	8b d0		 mov	 edx, eax
  0000f	c1 ea 14	 shr	 edx, 20			; 00000014H
  00012	81 e2 ff 07 00
	00		 and	 edx, 2047		; 000007ffH
  00018	81 ea fe 03 00
	00		 sub	 edx, 1022		; 000003feH
  0001e	89 11		 mov	 DWORD PTR [ecx], edx
$LN1@frexp:

; 21   : 
; 22   : 	x.x->exponent = 0x3FE;

  00020	25 ff ff ef bf	 and	 eax, -1074790401	; bfefffffH
  00025	0d 00 00 e0 3f	 or	 eax, 1071644672		; 3fe00000H
  0002a	89 45 0c	 mov	 DWORD PTR ___x$[ebp+4], eax

; 23   : 
; 24   : 	return __x;

  0002d	dd 45 08	 fld	 QWORD PTR ___x$[ebp]

; 25   : }

  00030	5d		 pop	 ebp
  00031	c3		 ret	 0
_frexp	ENDP
_TEXT	ENDS
END
